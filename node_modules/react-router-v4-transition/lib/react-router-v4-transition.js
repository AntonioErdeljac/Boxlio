!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("prop-types"),require("react"),require("react-router")):"function"==typeof define&&define.amd?define(["prop-types","react","react-router"],t):"object"==typeof exports?exports.ReactRouterV4Transition=t(require("prop-types"),require("react"),require("react-router")):e.ReactRouterV4Transition=t(e["prop-types"],e.react,e["react-router"])}(this,function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionSwitch=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(3),p=i(s),c=n(2),h=i(c),f=n(4),d=h.default.shape({type:h.default.oneOf([f.Route])}),R=t.TransitionSwitch=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.enteringRouteChildRef=null,i.leavingRouteChildRef=null,i.state={enteringRouteKey:null,leavingRouteKey:null,match:null},i}return l(t,e),a(t,[{key:"componentWillMount",value:function(){this.updateChildren(this.props,this.context)}},{key:"componentWillReceiveProps",value:function(e,t){this.updateChildren(e,t)}},{key:"updateChildren",value:function(e,t){var n=this,i=!1;p.default.Children.map(e.children,function(e){return e}).forEach(function(o){var r={path:o.props.path,exact:o.props.exact,strict:o.props.strict},l=n.getLocation(e,t),a=(0,f.matchPath)(l.pathname,r);if(!i&&a){if(i=!0,n.state.enteringRouteKey&&n.state.enteringRouteKey==o.key)return;n.state.leavingRouteKey&&!n.props.parallel||(n.leavingRouteChildRef=n.enteringRouteChildRef,n.enteringRouteChildRef=null),n.setState(u({},n.state,{leavingRouteKey:n.state.leavingRouteKey&&!n.props.parallel?n.state.leavingRouteKey:n.state.enteringRouteKey,enteringRouteKey:o.key,match:a}))}}),!i&&this.state.enteringRouteKey&&(this.leavingRouteChildRef=this.enteringRouteChildRef,this.enteringRouteChildRef=null,this.setState(u({},this.state,{leavingRouteKey:this.state.enteringRouteKey,enteringRouteKey:null,match:null})))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.enteringRouteKey!==t.enteringRouteKey||this.state.leavingRouteKey!==t.leavingRouteKey}},{key:"render",value:function(){var e=this,t=null,n=null,i={match:this.state.match,location:this.getLocation(this.props,this.context),history:this.context.router.history,staticContext:this.context.router.staticContext};return p.default.Children.map(this.props.children,function(e){return e}).forEach(function(o){if(o.key==e.state.enteringRouteKey){var r=null;r=o.props.component?p.default.createElement(o.props.component):o.props.render?o.props.render(i):o.props.children,t=p.default.cloneElement(r,u({ref:function(t){t&&(e.enteringRouteChildRef=t)},key:"child-"+o.key},i))}else if(o.key==e.state.leavingRouteKey){var l=null;l=o.props.component?p.default.createElement(o.props.component):o.props.render?o.props.render(i):o.props.children,n=p.default.cloneElement(l,u({ref:function(t){t&&(e.leavingRouteChildRef=t)},key:"child-"+o.key},i))}}),this.props.parallel||this.state.leavingRouteKey&&(t=null),p.default.createElement("div",null,t,n)}},{key:"componentDidMount",value:function(){var e=this;this.enteringRouteChildRef&&this.enteringRouteChildRef.componentWillAppear?this.enteringRouteChildRef.componentWillAppear(function(){return e.enteringChildAppeared()}):this.enteringChildAppeared()}},{key:"componentDidUpdate",value:function(e,t,n){var i=this,o=this.getLocation(e,n),r=this.getLocation(this.props,this.context),l=this.getMatch(e,n),u=this.getMatch(this.props,this.context);!this.props.parallel&&this.enteringRouteChildRef&&this.enteringRouteChildRef.componentWillEnter&&t.enteringRouteKey==this.state.enteringRouteKey&&null==this.state.leavingRouteKey&&null!=t.leavingRouteKey&&this.enteringRouteChildRef.componentWillEnter(function(){return i.enteringChildEntered()}),o.pathname==r.pathname&&l.isExact==u.isExact||(this.state.enteringRouteKey&&this.enteringRouteChildRef&&this.enteringRouteChildRef.componentWillEnter?this.props.parallel&&this.enteringRouteChildRef.componentWillEnter(function(){return i.enteringChildEntered()}):this.enteringChildEntered(),this.leavingRouteChildRef&&this.leavingRouteChildRef.componentWillLeave?!this.leavingRouteChildRef||t.leavingRouteKey&&!this.props.parallel||this.leavingRouteChildRef.componentWillLeave(function(){return i.leavingChildLeaved()}):this.leavingChildLeaved())}},{key:"getLocation",value:function(e,t){return e.location||t.router.route.location}},{key:"getMatch",value:function(e,t){return e.match||t.router.route.match}},{key:"enteringChildAppeared",value:function(){this.enteringRouteChildRef&&this.enteringRouteChildRef.componentDidAppear&&this.enteringRouteChildRef.componentDidAppear()}},{key:"enteringChildEntered",value:function(){this.enteringRouteChildRef&&this.enteringRouteChildRef.componentDidEnter&&this.enteringRouteChildRef.componentDidEnter()}},{key:"leavingChildLeaved",value:function(){this.leavingRouteChildRef&&this.leavingRouteChildRef.componentDidLeave&&this.leavingRouteChildRef.componentDidLeave(),this.leavingRouteChildRef=null,this.setState(u({},this.state,{leavingRouteKey:null}))}}]),t}(p.default.Component);R.propTypes={parallel:h.default.bool,children:h.default.oneOfType([h.default.arrayOf(d),d]),location:h.default.object},R.defaultProps={parallel:!1},R.contextTypes={router:h.default.shape({route:h.default.object.isRequired}).isRequired}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionSwitch=void 0;var i=n(0);t.TransitionSwitch=i.TransitionSwitch},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n}])});
//# sourceMappingURL=react-router-v4-transition.js.map